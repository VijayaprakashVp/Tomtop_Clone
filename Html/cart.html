<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shopping Cart - tomtop</title>
    <link rel="stylesheet" href="../Styles/cart.css" />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../Styles/footer.css" />
  </head>
  <body>
    <div id="outer">
      <div id="logo_img">
        <div>
          <a href="./index.html"
            ><img
              src="https://static.tomtop.com/tomtop/cart/images/logo.png?4.1.25"
              alt=""
          /></a>
        </div>
        <div id="shopping_text">
          <p class="orange_shade">SHOPPING CART</p>
          <p>SHIPPING & PLACE ORDER</p>
          <p>PAYMENT</p>
        </div>
      </div>
      <div>
        <h2 id="shop_cart">Your Shopping Cart</h2>
        <div id="cart_width">
          <div id="cart">
            <div>
              <p>Item</p>
            </div>
            <div id="price">
              <p>Price</p>
              <p>Qty</p>
              <p>Total</p>
            </div>
          </div>
          <div id="cart_items">
            <div>
              <div id="radio">
                <input type="radio" name="" id="" /><span
                  >Ships from China Warehouse</span
                >
              </div>
              <div id="cart_list">
                <!-- <h1>Cart Items</h1> -->
                <!--                     
                    
                        cart Items

                     -->
              </div>
            </div>
            <div id="total">
              <h2>Order Summary</h2>
              <div id="price1">
                <div>
                  <p>Subtotal :</p>
                  <p>Discount :</p>
                  <p>Total :</p>
                </div>
                <div id="total_number">
                  <p id="sub_Total">US$ 100</p>
                  <p>US$ 0</p>
                  <p id="overall_Total">US$ 100</p>
                </div>
              </div>
              <div id="promo">
                <p>+Apply a Promotion Code</p>
              </div>
              <div id="input_promo">
                <input type="text" name="" id="" placeholder="Promo Code" />
                <span>Apply</span>
              </div>
              <div id="coupon_text">
                <p>Flash deals are not allowed with coupon and points</p>
              </div>
              <div id="proc_check">
                <p id="checkout">
                  <a href="../Html/checkout.html">Proceed to Checkout</a>
                </p>
                <div>
                  <p id="buyer">Buyer Protection</p>
                </div>
              </div>
              <div id="refund">
                <div class="check_icon">
                  <div class="material-icons">task_alt</div>
                  <div>Full Refund if you don't receive your order</div>
                </div>
                <div class="check_icon">
                  <div class="material-icons">task_alt</div>
                  <div>
                    Full or Partial Refund , If the item is not as described
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="footer_part"></div>
      </div>
    </div>
  </body>
</html>
<script type="module">
  import footer from "../components/footer.js";

  let footer_part = document.getElementById("footer_part");

  footer_part.innerHTML = footer();
</script>
<script>
  // let link = window.location.href;

  // link = link.split("id=");
  // console.log("link:", link[1]);

  function fetchbyid_cart() {
    try {
      fetch(`http://localhost:6789/signup`)
        .then((res) => res.json())
        .then((data) => {
          display1(data[0].cart);
          console.log(data[0].cart);
        });
    } catch (e) {
      console.log(e.message);
    }
  }
  fetchbyid_cart();

  function display1(array) {
    var cart_items = document.getElementById("cart_list");
    var sub_Total = document.getElementById("sub_Total");
    var overall_Total = document.getElementById("overall_Total");
    var total = 0;

    array.forEach((product) => {
      // console.log(product);
      // let link = document.createElement("a");
      // link.href = `./product_detail.html?id=${product._id}`;
      // link.setAttribute("target", "_blank");

      let div = document.createElement("div");
      let div1 = document.createElement("div");
      div1.setAttribute("id", "div_1");
      let final_div = document.createElement("div");
      final_div.setAttribute("id", "final_div");

      let img = document.createElement("img");
      img.src = product.img_link;

      let name = document.createElement("p");
      name.setAttribute("id", "Product_name");

      name.innerText = product.product_name;

      let cur_price = document.createElement("p");
      cur_price.setAttribute("id", "cur_price");

      cur_price.innerText = product.current_price;

      // let reg_price = document.createElement("p");
      // reg_price.setAttribute("id", "reg_price");

      // reg_price.innerText = product.regular_price;

      div.append(img);
      div1.append(name, cur_price);
      // link.append(div);
      final_div.append(div, div1);
      cart_items.append(final_div);

      var sum = cur_price.innerText.split(" ");
      console.log("sum:", sum);

      total += +sum[1];
    });

    overall_Total.innerText = "US$" + total;
    sub_Total.innerText = total;
  }
</script>
