<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Place Order - tomtop</title>
    <link rel="stylesheet" href="../Styles/checkout.css" />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../Styles/footer.css" />
  </head>
  <body>
    <div id="outer">
      <div id="logo_img">
        <div>
          <a href="./index.html"
            ><img
              src="https://static.tomtop.com/tomtop/cart/images/logo.png?4.1.25"
              alt=""
          /></a>
        </div>
        <div id="shopping_text">
          <p class="orange_shade">SHOPPING CART</p>
          <p class="orange_shade">SHIPPING & PLACE ORDER</p>
          <p>PAYMENT</p>
        </div>
      </div>
      <div>
        <h2 id="shop_cart">Shipping Address</h2>
        <div id="cart_width">
          <div id="cart_items">
            <div>
              <div id="cart_list">
                <p>Please Enter the Shipping Address</p>

                <form action="" onsubmit="show_address()">
                  <div id="address_form">
                    <div id="in_address">
                      <div id="label">
                        <label for=""> Name : </label
                        ><label for=""> Street : </label
                        ><label for=""> City : </label>
                      </div>
                      <div id="label_input">
                        <input type="text" placeholder="Name" id="name_1"/>
                        <input type="text" placeholder="Street" id="street"/>
                        <input type="text" placeholder="City" id="city"/>
                      </div>
                    </div>
                    <div id="in_address">
                      <div id="label">
                        <label for="" > State : </label
                        ><label for="" > PIN Code : </label
                        ><label for="" > Contact : </label>
                      </div>
                      <div id="label_input">
                        <input type="text" placeholder="State" id="state"/>
                        <input type="number" placeholder="PIN CODE" id="pin_code"/>
                        <input type="number" placeholder="Contact Number" id="contact"/>
                      </div>
                    </div>
                  </div>
                  <button id="address_submit">Submit</button>
                  <div>
                    
                  </div>
                </form>

                <hr>
                <div id="address_preview">
                    <div>Please check your Shipping Address : </div>
                    <p>Estimated Delivery in 5 Business Days!</p>
                    <p><h3 id="Address_Check">Address</h3></p>
                </div>
              </div>
            </div>
            <div id="total">
              <h2>Order Summary</h2>
              <div id="price1">
                <div>
                  <p>Subtotal :</p>
                  <p>Discount :</p>
                  <p>Total :</p>
                </div>
                <div id="all_total">
                  <p id="sub_Total">US$ 100</p>
                  <p>US$ 100</p>
                  <p id="overall_Total">US$ 100</p>
                </div>
              </div>
              <div id="promo">
                <p>+Apply a Promotion Code</p>
              </div>
              <div id="input_promo">
                <input type="text" name="" id="" placeholder="Promo Code" />
                <span>Apply</span>
              </div>
              <div id="coupon_text">
                <p>Flash deals are not allowed with coupon and points</p>
              </div>
              <div id="proc_check">
                <p id="checkout"><a href="./payment.html">Place Your Order</a></p>
                <div>
                  <p id="buyer">Buyer Protection</p>
                </div>
              </div>
              <div id="refund">
                <div class="check_icon">
                  <div class="material-icons">task_alt</div>
                  <div>Full Refund if you don't receive your order</div>
                </div>
                <div class="check_icon">
                  <div class="material-icons">task_alt</div>
                  <div>
                    Full or Partial Refund , If the item is not as described
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div>
          <div>
            <h1>Payment Methods</h1>
          </div>
          <div>
            <div id="payment_options">
              <div id="card_Image">
                  <div><input type="radio" name="" id=""></div>
                  <div><img src="https://i.ibb.co/fQmVBfV/Screenshot-92.png" alt=""></div>
              </div>
              <div id="cards">
                  <div id="card_img_big">
                      <p>Pay for</p>
                      <img src="https://riverpalm.com/wp-content/uploads/2017/06/Credit-Card-Visa-And-Master-Card-Transparent-PNG-768x179.png" alt="">
                  </div>
                  <div>
                      <h3>Billing Address</h3>
                      <div id="refund">
                        <div class="check_icon">
                          <div class="material-icons">task_alt</div>
                          <div id="bill_address">My billing address is the same as my shipping address</div>
                        </div>
                  </div>
                  <div id="add_check">
                    Make sure that the billing address you enter below matches the name & address on your credit card.
                  </div>

                  <div>
                      <h3 id="address_check_1">Address_Check</h3>
                  </div>
              </div>
            </div>
          </div>
        </div>
        <div id="footer_part"></div>
      </div>
    </div>
  </body>
</html>
<script type="module">
  import footer from "../components/footer.js";

  let footer_part = document.getElementById("footer_part");

  footer_part.innerHTML = footer();
</script>


<script>


  function show_address () {

    event.preventDefault();

    let Address_Check = document.getElementById("Address_Check");
    let address_check_1 = document.getElementById("address_check_1");

  let name_1 = document.getElementById("name_1").value
  // console.log('name:', name_1)
  let street = document.getElementById("street").value
  let city = document.getElementById("city").value
  let state = document.getElementById("state").value
  let pin_code = document.getElementById("pin_code").value
  let contact = document.getElementById("contact").value

  Address_Check.innerText = name_1 + "," + street + "," + city + "," + state + "," + pin_code + "." + "Ph." + contact;
  address_check_1.innerText = name_1 + "," + street + "," + city + "," + state + "," + pin_code + "." + "Ph." + contact;
  // Address_Check.innerText ="Hello";
  // console.log('Address_Check:', Address_Check)
  // console.log(name_1 + "," + street + "," + city + "," + state + "," + pin_code + "." + "Ph." + contact)

  }


</script>
<script>
  
  function fetchbyid_checkout() {
    try {
      fetch(`http://localhost:6789/signup`)
        .then((res) => res.json())
        .then((data) => {
          display1(data[0].cart);
          console.log(data[0].cart);
        });
    } catch (e) {
      console.log(e.message);
    }
  }
  fetchbyid_checkout();

  var total = 0;

  function display1(array) {
    var sub_Total = document.getElementById("sub_Total") 
    var overall_Total = document.getElementById("overall_Total")


    array.forEach((product) => {

      let cur_price = document.createElement("p");
      cur_price.setAttribute("id", "cur_price");

      cur_price.innerText = product.current_price;
      
      var sum = cur_price.innerText.split(" ");
      // console.log('sum:', sum)

      total += +sum[1];

    });

    overall_Total.innerText = "US$" + total;
    // console.log('overall_Total:', overall_Total)
    sub_Total.innerText = total;
    console.log('sub_Total:', sub_Total)
  }


</script>